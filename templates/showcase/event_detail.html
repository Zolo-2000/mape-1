{% extends 'base.html' %}

{% load staticfiles %}

{% block css %}
    <link href="{% static 'showcase/css/event.css' %}" rel="stylesheet">        
    <link href="{% static 'plugins/clockpicker/clockpicker.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
<span class="hidden" id="event-info" event-id="{{ event.id }}"></span>
  

<div class="front-image">        
    {% if object.front_image %}      
    <img src="{{ object.front_image.url }}">
    {% else %}
    <img src="{% static 'showcase/img/event-header.jpg' %}">
    {% endif %}
    <div class="title center">
        <h3 class="white">{{ event.name }}</h3>        
    </div>
</div>

{% if is_organizer %}
<div class="center">
    <a href="/event/{{ event.id }}/update/" class="waves-effect waves-teal btn-flat">Editar</a>
    <a class="waves-effect waves-teal btn-flat">Publicar</a>
</div>
{% endif %}

<div class="red center timeuntil">
    <h2>En {{ event.start|timeuntil }}</h2>
    {% if is_organizer %}
    <a href="#guests_modal" class="waves-effect waves-light btn">Invitar</a>
    {% else %}
    <a class="waves-effect waves-light btn">Me gusta</a>
    <a class="waves-effect waves-light btn">Asistiré</a>
    <a class="waves-effect waves-light btn">Talvez asista</a>
    <a class="waves-effect waves-light btn">No asistiré</a>
    {% endif %}
</div>

<div class="row">
    <div class="col s12">
        <ul class="tabs">
            <li class="tab col s4"><a class="active" href="#information">Información</a></li>            
            <li class="tab col s4"><a href="#comments">Comentarios</a></li>
            <li class="tab col s4"><a href="#pictures">Fotos</a></li>
        </ul>
    </div>
    <div id="information" class="col s12">
        <div class="section">
            <div class="center">
                <div class="card">
                    <p>Organizado por</p>
                    <div class="chip">                        
                        {% for organizer in event.get_organizers %}
                        {% if organizer.profile.avatar %}
                        <img src="{{ organizer.profile.avatar.url }}" alt="Contact Person">
                        {% else %}
                        <img src="{% static 'showcase/img/event-header.jpg' %}" alt="Contact Person">
                        {% endif %}
                        <a href="/profiles/{{ organizer.username }}/">{{ organizer.get_full_name }}</a>
                        {% endfor %}
                    </div>                    
                </div>

                <div class="card">
                    {{ event.description }}                
                </div>
                
                <div class="card">
                    <i class="small material-icons">query_builder</i>
                    {{ event.start }}
                </div>                
            </div>

            <strong>{{ event.get_information }}</strong>
        </div>
    </div>

    <div id="comments" class="col s12">
        
        <ul class="collection">
            {% for comment in object.comments %}
            <li class="collection-item">
                <div class="chip">                        
                    {% if comment.profile.avatar %}
                    <img src="{{ comment.profile.avatar.url }}" alt="Contact Person">
                    {% else %}
                    <img src="{% static 'showcase/img/event-header.jpg' %}" alt="Contact Person">
                    {% endif %}
                    <a href="/profiles/{{ comment.profile.user.username }}/">{{ comment.profile.user.get_full_name }}</a>
                </div>                
                <p>{{ comment.text }}</p>
                <i>Hace {{ comment.date_joined|timesince }}</i>
            </li>
            {% empty %}
            <li class="collection-item">
                No comments yet.
            </li>   
            {% endfor %}         
            <li class="collection-item">
                <form action="/event/add/comment/" method="POST" enctype="multipart/form-data" novalidate>
                    {% csrf_token %}

                    <input type="hidden" name="event" value="{{ object.id }}">
                    <div class="input-field">
                        <input placeholder="Mensaje" id="comment" name="text" type="text" class="validate">
                        <label for="comment">Comenta algo</label>
                    </div>
                    
                    <button type="submit" class="waves-effect waves-light cyan darken-3 btn right marginado">
                        <i class="material-icons right">send</i>
                        Enviar
                    </button>
                </form>     
            </li>
        </ul>
    </div>
    <div id="pictures" class="col s12">
        <div class="row">
            <div class="col s2">
                <img class="materialboxed" style="width: 100%" src="{% static 'showcase/img/event-header.jpg' %}">
            </div>
            <div class="col s2">
                <img class="materialboxed" style="width: 100%" src="{% static 'showcase/img/event-header.jpg' %}">
            </div>
        </div> 





         <div class="section col s12 m12 l6">
            <div class="card">
                <div class="card-image waves-effect waves-block waves-light center-align">
                  {% if not objects.front_image %}
                  <img class="activator" src="{% static 'showcase/img/event-header.jpg' %}">{%else%}
                   <i class="activator material-icons large">perm_media</i>
                   {%endif%}
                </div>
                <div class="card-content">
                  <span class="card-title activator grey-text text-darken-4">{{ object.name }}<i class="material-icons right">more_vert</i></span>
                  <p> De:
                    <!-- Chip para el creador del evento -->
                    <div class="chip">
                        <img src="{% static 'showcase/img/event-header.jpg' %}" alt="Contact Person">
                        <a href="#">Jane Do </a>
                    </div></p>
                </div>
                <!-- Contenido de la tarjeta -->
                <div class="card-reveal">
                  <span class="card-title grey-text text-darken-4">Informaci&oacute;n:<i class="material-icons right">close</i></span>
                  <p class="grey-text text-darken-3 lighten-3">{{ object.description }}</p>
                  <p class="grey-text text-darken-3 lighten-3">Inicia: {{ object.start }}</p>
                  {% if objects.end %}
                  <p class="grey-text text-darken-3 lighten-3">Finaliza: {{ object.ends }}</p> {%endif%}
                  <!-- Info -->
                    <div class="grey lighten-3 col s12 right-align">
                        {% if object.is_public%}
                        <p class="grey-text text-darken-3 lighten-3 no-margin">Public</p> 
                        {% else %} 
                        <p class="grey-text text-darken-3 lighten-3 no-margin">Privado</p> 
                        {%endif%}
                        <p class="grey-text text-darken-3 lighten-3 no-margin">980 Invitados</p> 
                        <p class="grey-text text-darken-3 lighten-3 no-margin">300 Asistir&aacute;n</p>
                        {% if not object.cover %}
                        <p class="grey-text text-darken-3 lighten-3 no-margin">&#x2605;Gratuito</p> 
                        {% else%}
                        <p class="grey-text text-darken-3 lighten-3 no-margin">Cover: {{ object.cover }}</p> 
                        {% endif %}
                        <p class="grey-text text-darken-3 lighten-3 no-margin">12 Personas te invitaron</p> 
                    </div>
                </div>
            </div>              
        </div>
    </div>
</div>


<div class="section grey lighten-4">
    <div class="row container">
      <!-- Slides -->
      <div class="section slider col m8 l8 s12 ">
          <ul class="slides">
            <!-- Host account -->
            <li class="cyan">
              <img src="{% static 'showcase/img/mar.jpg' %}"> 
              <div class="caption center-align">
                  <h5 class="white-text shadow"> Un evento de:</h5>
                  <div class="host">
                    <a href="#"><img class="circle" src="{% static 'showcase/img/rihana.jpg' %}" ><h2>Jane Do </h2></a>
                  </div>
              </div>
            </li>
            <!-- Sponsors slides  -->
            <li class="cyan">
              <img src="{% static 'showcase/img/Proy_Mape-01-01.png' %}"> 
              <div class="caption center-align">
                <h5 class="white-text shadow"> Con el auspicio de:</h5>
                <div class="host">
                  <a href="#"><h2>Mape </h2></a>
                </div>
              </div>
            </li>
          </ul>
      </div>
      <!-- Chips para Patrocinadores -->
      <div class="section col m4 l4 s12">
          <div class="chip">
              <img src="{% static 'showcase/img/mar.jpg' %}" alt="Contact Person">
              <a href="#">Jane Do </a>
          </div>          
          <div class="chip">
              <img src="{% static 'showcase/img/fiesta.jpg' %}" alt="Contact Person">
              <a href="#">Don Guiña </a>
          </div>
          <div class="chip">
              <img src="{% static 'showcase/img/tea.jpg' %}" alt="Contact Person">
              <a href="#">Don Tuco Lopez </a>
          </div>
          <div class="chip">
              <img src="{% static 'showcase/img/event-header.jpg' %}" alt="Contact Person">
              <a href="#">Mape </a>
          </div>
          <div class="chip">
              <img src="{% static 'showcase/img/event-header.jpg' %}" alt="Contact Person">
              <a href="#">Jane Do </a>
          </div>
      </div>
    </div>
  </div>

{% include "includes/guests_modal.html" %}
{% include "includes/footer.html" %}

{% endblock %}

{% block js %}
    <!-- Rango  jquery materialize para mape -->
    <script src="{% static 'showcase/js/rango-jquery.js' %}"></script>
    <script src="{% static 'showcase/js/event.js' %}"></script>    
{% endblock %}













