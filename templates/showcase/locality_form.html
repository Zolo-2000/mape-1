{% extends 'base.html' %}

{% load staticfiles %} 

{% block css %}
    <link href="{% static 'showcase/css/map.css' %}" rel="stylesheet"> 
{% endblock %}

{% block nav-left %}
<li><a class="" href="{% url 'map' %}"><img class="mape-tiny"src="{% static 'showcase/img/Proy_Mape-01-01.png' %}"><b>Mape</b></a></li>
{% if not request.session %}
    <li><a href="{%url 'signup' %}" class="amber darken-1">Resgistrarse</a></li>
{% endif %}
{%endblock%}

{% block nav-right %}
    {% if not request.session %}
        <li><a href="{% url 'login' %}" class="btn blue darken-1">Iniciar Sesión</a></li>
    {%else%}
        <li><a class="dropdown-button" data-activates="menu-1"> <i class="material-icons medium">info</i> Notifications <span class="new badge cyan">4</span></a></li>
        {%if user.profile.avatar %} 
            <li><a class="dropdown-button" data-activates="menu-2"><img class=" responsive-img circle" src="{{ user.profile.avatar.url }}" width="60"></a></li>
            {%else%}
                <li><a class="dropdown-button" data-activates="menu-2"> <i class="material-icons medium">person_pin</i></a></li>
        {%endif%}
    {% endif %}
{%endblock%}


{% block nav-center %}
<!-- Boton de Busqueda -->
  <div class="input-field">
      <i class="material-icons prefix ">search</i>
      <input id="search2" type="search" class="validate no-padding">
      <label for="search2"  data-error="wrong"> buscar<label>
  </div>
{%endblock%}

{%if not request.session %}
    <!-- Contenido del dropdown Notificaciones -->
    {% block dropDown-content-1 %}
    <li><div class="collection">
        <a href="#!" class="collection-item"><span class="badge">1</span>Alan</a>
        <a href="#!" class="collection-item"><span class="new badge">4</span>Alan</a>
        <a href="#!" class="collection-item">Alan</a>
        <a href="#!" class="collection-item"><span class="badge">14</span>Alan</a>
      </div></li>
    <li class="divider"></li>
    <li><a href="" class="center"> Ver mas </a></li>
    {%endblock%}

    <!-- Contenido del dropdown Configuraciones de cuenta -->
    {% block dropDown-content-2 %}
    <li><a href="/profiles/{{ user.username }}/" class="center"> <i class="material-icons">settings_applications</i>Configuraciones </a></li>
    <li><a href="" class="center"> <i class="material-icons">group</i>Contactos </a></li>

        <!-- Links genericos para cuentas comerciales -->
        {% if user_commertial %}
        <li><a href="" class="center"> <i class="material-icons">assignment_ind</i>{{ user_commertial.commertial_name }}</a></li>
        {% endif %}
    <li class="divider"></li>
    <li><a href="/logout/" class="center"> <i class="material-icons">power_settings_new</i>Salir</a></li>
    {% endblock%}
{%endif%}





{% block content %}
{% load widget_tweaks %}

{{ form.errors }}
{{ commercial_form.errors }}

<div class="row container">
    <div class="col s12 form-panel">
        <h4 class="center">Cuentanos de tu localidad</h4>
        <form class="row" action="" method="POST" enctype="multipart/form-data" novalidate>
            {% csrf_token %}

            <div class="col s12">
                <div class="switch">
                    <label>
                        Privada
                        {% if user.profile.is_complete %}
                        {{ form.is_public }}
                        {% else %}
                        {{ form.is_public|attr:"disabled" }}
                        {% endif %}
                        <span class="lever"></span>                        
                        Pública
                    </label>
                </div>
                {% if not user.profile.is_complete %} Completa tu perfil para habilitar esta opción {% endif %}
            </div>

            <div class="input-field col s12">
                {{ form.name|add_class:"validate" }}
                <label for="{{ form.name.id_for_label }}">{{ form.name.label }}</label>
            </div>
            <div class="input-field col s12">        
                {{ form.description|add_class:"materialize-textarea validate" }}
                <label for="{{ form.description.id_for_label }}">{{ form.description.label }}</label>
            </div>

            <div class="file-field input-field col s12">
                <div class="btn">
                    <span>Portada</span>
                    {{ form.front_image }}
                </div>
                <div class="file-path-wrapper">
                    <input class="file-path validate" type="text">
                </div>
            </div>

            <div class="file-field input-field col s12">
                <div class="btn">
                    <span>Perfil</span>
                    {{ form.profile_image }}
                </div>
                <div class="file-path-wrapper">
                    <input class="file-path validate" type="text">
                </div>
            </div>

            
            <div class="input-field col s12">
                {{ form.categories|add_class:"validate" }}
                <label for="{{ form.categories.id_for_label }}">{{ form.categories.label }}</label>
            </div>   

            {{ form.latitude }}
            {{ form.longitude }}
            {{ form.owner }}

            <div class="col s12 center">
                <button class="btn waves-effect waves-light" type="submit" name="action">Guardar
                    <i class="material-icons right">send</i>
                </button>        
            </div>
        </form>
    </div>
</div>

{% endblock %}

{% block js %}
{% endblock %}